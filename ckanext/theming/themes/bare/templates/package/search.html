{% extends "package/base.html" %}

{%- block page_action %}
    {{ ui.link(_('Add Dataset'), href=h.url_for('dataset.new')) if h.check_access('package_create') }}
{%- endblock %}

{%- block page_header -%}
{%- endblock %}

{%- block primary_content_inner %}

    {{ fields }}

    {{ ui.search_form(q) }}

    <h2>
        {%- if not query_error %}
            {%- if page.item_count %}
                {{ ui.pagination_info(page.first_item, page.last_item, page.item_count) }}
            {%- else %}
                {{ _('No datasets found') }}
            {%- endif %}
        {%- else %}
            {{ _('Error') }}
        {%- endif %}
    </h2>

    {%- block package_list %}
        {%- if page.items %}
            {%- call ui.util.call(ui.listing) -%}
                {%- for item in page.items %}
                    {{ ui.package_item(item) }}
                {%- endfor %}
            {%- endcall %}
        {%- else %}
            <p>{{ _('No datasets found.') }}</p>
        {%- endif %}
    {%- endblock %}

    {%- block pagination %}
        {{ ui.pagination(page.page, page.last_page, page._url_generator) }}
    {%- endblock %}
{%- endblock %}
