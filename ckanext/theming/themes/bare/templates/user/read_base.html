{% extends "_page.html" %}

{%- set user = user_dict %}
{%- set dataset_type = h.default_package_type() %}
{%- set org_type = h.default_group_type('organization') %}
{%- set group_type = h.default_group_type('group') %}

{%- block subtitle %}{{ user.display_name }} {{ g.template_title_delimiter }} {{ _('Users') }}{% endblock %}

{%- block breadcrumb_content %}
    {{ ui.nav_item(_('Users'), href=h.url_for('user.index')) }}
    {{ ui.nav_item(user.display_name|truncate(35), href=h.url_for('user.read', id=user.name)) }}
{%- endblock %}

{%- block page_header_action %}
    {%- if h.check_access('user_update', user) %}
        {{ ui.link(_('Manage'), href=h.url_for('user.edit', id=user.name), class_='btn btn-secondary', icon='wrench') }}
    {%- endif %}
{%- endblock %}

{%- block content_primary_nav %}
    {{ ui.nav_item(h.humanize_entity_type('package', dataset_type, 'content tab') or _('Datasets'), href=h.url_for('user.read', id=user.name), active=true) }}
    {{ ui.nav_item(h.humanize_entity_type('organization', org_type, 'content tab') or _('Organizations'), href=h.url_for('user.read_organizations', id=user.name), active=false) }}
    {{ ui.nav_item(h.humanize_entity_type('group', group_type, 'content tab') or _('Groups'), href=h.url_for('user.read_groups', id=user.name), active=false) }}
    {%- if h.check_access('api_token_list', {'user': user['name']}) %}
        {{ ui.nav_item(_('API Tokens'), href=h.url_for('user.api_tokens', id=user.name), active=false) }}
    {%- endif %}
{%- endblock %}

{%- block secondary_content %}
    {{ ui.snippet("user/snippets/info.html", user=user, is_myself=is_myself, is_sysadmin=is_sysadmin, dataset_type=dataset_type, org_type=org_type, group_type=group_type, am_following=am_following) }}
{%- endblock %}
