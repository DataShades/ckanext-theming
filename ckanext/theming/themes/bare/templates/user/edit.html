{% extends "user/edit_base.html" %}

{%- block subtitle %}
    {{ ui.subtitle_item(_('Edit Profile')) }}
    {{ super() }}
{% endblock %}

{%- block breadcrumb_content %}
    {{ super() }}
    {{ ui.breadcrumb_item(_('Edit Profile'), href=h.url_for('user.edit', id=user_dict.name)) }}
{%- endblock %}

{%- block primary_content_page %}
    {{ ui.heading(_('Edit Profile'), level=1) }}

    {%- call ui.util.call(ui.form, method="POST", class="user-form") -%}
        {{ h.csrf_input() }}

        {{ ui.form_errors(error_summary) }}

        {{ ui.input(name="name", label=_('Username'), value=data.name or "", errors=errors.name or []) }}
        {{ ui.input(name="email", label=_('Email'), value=data.email or "", errors=errors.email or [], type="email") }}
        {{ ui.input(name="fullname", label=_('Full Name'), value=data.fullname or "", errors=errors.fullname or []) }}
        {{ ui.textarea(name="about", label=_('About'), value=data.about or "", errors=errors.about or []) }}

        {{ ui.input(name="password1", label=_('New Password'), type="password", errors=errors.password1 or []) }}
        {{ ui.input(name="password2", label=_('Confirm Password'), type="password", errors=errors.password2 or []) }}

        {%- call ui.util.call(ui.form_actions) -%}
            {{ ui.button(_('Update Profile'), type="submit") }}
            {{ ui.button(_('Cancel'), type="button", href=h.url_for('user.read', id=user_dict.name)) }}
        {%- endcall %}
    {%- endcall %}
{%- endblock %}
