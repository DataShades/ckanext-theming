{% extends "organization/_base.html" %}
{%- set _layout = _layout | default("fullwidth") -%}

{%- block subtitle %}
    {{ ui.subtitle_item(h.humanize_entity_type('organization', group_type, 'page title') or _('Organizations')) }}
    {{ super() }}
{% endblock %}

{%- block breadcrumb_content %}
    {{ ui.breadcrumb_item(h.humanize_entity_type('organization', group_type, 'breadcrumb') or _('Organizations'), href=h.url_for(group_type ~ '.index')) }}
{%- endblock %}

{%- block content_nav -%}
{%- endblock %}

{%- block page_action %}
    {{ ui.page_action_item(h.humanize_entity_type('organization', group_type, 'add link') or _('Add Organization'), href=h.url_for(group_type ~ '.new')) if h.check_access('organization_create') }}
{%- endblock %}

{%- block primary_content_inner %}
    {{ ui.heading(h.humanize_entity_type('organization', group_type, 'page title') or _('Organizations'), level=1) }}
    {%- block search_form %}
        {%- set sorting_options = [
            {"text": _('Name Ascending'), "value": "title asc"},
            {"text": _('Name Descending'), "value": "title desc"},
        ] %}

        {{ ui.search_form(query=q, sorting_options=sorting_options, sorting=sort_by_selected, item_count=page.item_count, first_item_position=page.first_item, last_item_position=page.last_item) }}
    {%- endblock %}

    {%- block organization_list %}
        {%- if page.items %}
            {{ ui.organization_list(ui.util.map(ui.organization_item, page.items)) }}

        {%- else %}
            {%- if q %}
                <p>{{ _('There was an error while searching.') }}</p>
            {%- else %}
                <p>{{ _('No organizations found.') }}</p>
            {%- endif %}
        {%- endif %}
    {%- endblock %}

    {%- block pagination %}
        {{ ui.pagination(page.page, page.last_page, page._url_generator) }}
    {%- endblock %}
{%- endblock %}
