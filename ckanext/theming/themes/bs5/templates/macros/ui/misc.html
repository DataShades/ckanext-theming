{%- macro datetime(dt, date_format, with_hours) -%}
    <time {{ ui.util.attrs(kwargs) }} datetime="{{ h.render_datetime(dt, date_format='%Y-%m-%dT%H:%M:%S%z') }}">
        {{ h.render_datetime(dt, date_format=date_format, with_hours=with_hours) }}
    </time>
{%- endmacro %}

{%- macro spacer(size="md") -%}
    {%- set size_classes = {
        'xs': 'my-1',
        'sm': 'my-2',
        'md': 'my-3',
        'lg': 'my-4',
        'xl': 'my-5'
    } %}
    <div {{ ui.util.attrs(kwargs) }} class="{{ size_classes.get(size, size_classes.md) }}"></div>
{%- endmacro %}

{%- macro truncate(content, max_lines=1) -%}
    <div class="{{ 'd-inline-block text-truncate' if max_lines == 1 else 'text-truncate' }}" style="{{ 'max-width: 100%' if max_lines == 1 else 'display: -webkit-box; -webkit-line-clamp: ' ~ max_lines ~ '; -webkit-box-orient: vertical; overflow: hidden;' }}" {{ ui.util.attrs(kwargs) }}>
        {{ content }}
    </div>
{%- endmacro %}

{%- macro badge_count(count) -%}
    <span {{ ui.util.attrs(kwargs) }} class="badge rounded-pill bg-danger">{{ count }}</span>
{%- endmacro %}

{%- macro skeleton_loader(style="text") -%}
    <div {{ ui.util.attrs(kwargs) }} class="placeholder-glow">
        {%- if style == 'avatar' %}
            <span class="placeholder placeholder-xs col-2 rounded-pill bg-secondary"></span>
        {%- elif style == 'input' %}
            <span class="placeholder col-12"></span>
        {%- else %}
            <span class="placeholder col-6"></span>
        {%- endif %}
    </div>
{%- endmacro %}

{%- macro notification(title, content, style="info") -%}
    {%- set style_map = {
        'primary': 'primary',
        'secondary': 'secondary',
        'info': 'info',
        'success': 'success',
        'warning': 'warning',
        'danger': 'danger'
    } %}
    <div {{ ui.util.attrs(kwargs) }} class="alert alert-{{ style_map.get(style, 'info') }}">
        {%- if title %}
            <h4 class="alert-heading">{{ title }}</h4>
        {%- endif %}
        <p>{{ content }}</p>
    </div>
{%- endmacro %}

{%- macro pagination_info(total, first, last, template) -%}
    {%- if not template and first is undefined or last is undefined -%}
        {% set template = ungettext("Found {total} result", "Found {total} results", total) %}
    {%- elif not template -%}
        {% set template = _("Results {first} - {last} out of {total}")  %}
    {%- endif -%}
    {{ template.format(first=first, last=last, total=total) }}
{%- endmacro %}
