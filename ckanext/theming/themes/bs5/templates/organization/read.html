{% extends "organization/base.html" %}

{%- block subtitle %}{{ group_dict.title or group_dict.name }}{% endblock -%}

{%- block breadcrumb_content %}
    {{ ui.breadcrumb_item(h.humanize_entity_type('organization', group_type, 'breadcrumb') or _('Organizations'), h.url_for(group_type ~ '.index')) }}
    {{ ui.breadcrumb_item(group_dict.title or group_dict.name, h.url_for(group_type ~ '.read', id=group_dict.name)) }}
{%- endblock -%}

{%- block primary_content_inner %}
    <div class="row">
        <div class="col-md-8">
            {%- if group_dict.description %}
                <div class="mb-4">
                    {{ h.render_markdown(group_dict.description) }}
                </div>
            {%- endif %}

            {%- if group_dict.url %}
                <div class="mb-3">
                    <strong>{{ _('Website') }}:</strong>
                    {{ ui.link(group_dict.url, group_dict.url) }}
                </div>
            {%- endif %}

            <div class="mt-4">
                {%- if c.action == 'bulk_process' %}
                    {% block actions_content %}{% h.snippet('snippets/organization_bulk_process.html', group=group_dict) %}{% endblock %}
                {%- else %}
                    {% block info_content %}{% h.snippet('snippets/organization_info.html', organization=group_dict) %}{% endblock %}
                {%- endif %}
            </div>
        </div>
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">{{ _('Statistics') }}</h5>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <strong>{{ _('Datasets') }}:</strong>
                            <span class="badge bg-primary">{{ group_dict.package_count or 0 }}</span>
                        </li>
                        <li class="list-group-item">
                            <strong>{{ _('Members') }}:</strong>
                            <span class="badge bg-secondary">{{ group_dict.member_count or 0 }}</span>
                        </li>
                    </ul>

                    <div class="mt-3">
                        {%- if h.check_access('organization_update', {'id': group_dict.id}) %}
                            {{ ui.button(_('Edit Organization'), href=h.url_for(group_type ~ '.edit', id=group_dict.name), style="secondary", class="w-100 mb-2") }}
                        {%- endif %}
                        {%- if h.check_access('organization_delete', {'id': group_dict.id}) %}
                            {{ ui.button(_('Delete Organization'), href=h.url_for(group_type ~ '.delete', id=group_dict.name), style="danger", class="w-100") }}
                        {%- endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{%- endblock -%}
