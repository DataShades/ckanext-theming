{% extends "page.html" %}

{%- block subtitle %}{{ _('Register') }}{% endblock -%}

{%- block breadcrumb_content %}
    {{ ui.breadcrumb_item(_('Users'), h.url_for('user.index')) }}
    {{ ui.breadcrumb_item(_('Register'), h.url_for('user.register')) }}
{%- endblock -%}

{%- block primary_content %}
    <div class="card">
        <div class="card-header">
            <h3 class="card-title mb-0">{{ _('Register') }}</h3>
        </div>
        <div class="card-body">
            {%- block primary_content_inner %}
                <div class="alert alert-info">
                    {{ _('Create a new account to access the data portal.') }}
                </div>

                {%- block errors %}{% endblock -%}

                {{ ui.form_block(method="POST", action=h.url_for('user.register'), class="register-form") }}
                    {{ ui.input("name", "field-username", label=_('Username'), value=data.name, error=errors.name, required=true, class="mb-3") }}
                    {{ ui.input("fullname", "field-fullname", label=_('Full Name'), value=data.fullname, error=errors.fullname, class="mb-3") }}
                    {{ ui.input("email", "field-email", label=_('Email'), type="email", value=data.email, error=errors.email, required=true, class="mb-3") }}
                    {{ ui.input("password1", "field-password", label=_('Password'), type="password", error=errors.password, required=true, class="mb-3") }}
                    {{ ui.input("password2", "field-password-confirm", label=_('Confirm Password'), type="password", error=errors.password2, required=true, class="mb-3") }}

                    {%- if g.recaptcha_publickey %}
                        {# Recaptcha snippet would go here #}
                    {%- endif %}

                    {{ ui.form_actions(
                        ui.button(_('Create Account'), type="submit", style="primary") ~
                        ui.button(_('Cancel'), type="button", href=h.url_for('home.index'), style="secondary")
                    ) }}
                {{ ui.form_end() }}
            {%- endblock -%}
        </div>
    </div>
{%- endblock -%}

{%- block secondary_content %}
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">{{ _('Already have an account?') }}</h5>
            <p class="card-text">{{ _('If you already have an account you can sign in.') }}</p>
            {{ ui.button(_('Sign In'), href=h.url_for('user.login'), style="primary", class="w-100") }}
        </div>
    </div>
{%- endblock -%}
