{%- macro datetime(dt) -%}
    <time datetime="{{ h.render_datetime(dt, date_format='%Y-%m-%dT%H:%M:%S%z') }}" {{ ui.util.attrs(kwargs) }}>
        {{ h.render_datetime(dt, with_hours=True) }}
    </time>
{%- endmacro %}

{%- macro spacer(size="md") -%}
    {%- do kwargs -%}
    <div class="spacer-{{ size }}" style="
        {%- if size == 'xs' %}height: 0.25rem;
        {%- elif size == 'sm' %}height: 0.5rem;
        {%- elif size == 'md' %}height: 1rem;
        {%- elif size == 'lg' %}height: 1.5rem;
        {%- elif size == 'xl' %}height: 3rem;
        {%- else %}height: 1rem;{%- endif %}"></div>
{%- endmacro %}

{%- macro truncate(content, max_lines=1) -%}
    <div {{ ui.util.attrs(kwargs) }} class="" style="
        display: -webkit-box;
        -webkit-line-clamp: {{ max_lines }};
        -webkit-box-orient: vertical;
        overflow: hidden;
    ">{{ content }}</div>
{%- endmacro %}

{%- macro badge_count(count) -%}
    <sup {{ ui.util.attrs(kwargs) }} class="badge">{{ count }}</sup>
{%- endmacro %}

{%- macro skeleton_loader(style="text") -%}
    <div {{ ui.util.attrs(kwargs) }} class="skeleton-loader {{ style if style in ['text', 'paragraph', 'button', 'image', 'input', 'avatar'] else 'text' }}"
         style="background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
                background-size: 200% 100%;
                animation: loading 1.5s infinite;
                border-radius: 4px;
                min-height: 1em;
                margin: 0.5em 0;">
        &nbsp;
    </div>
    <style>
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
{%- endmacro %}

{%- macro notification(title, content, style="info") -%}
    {%- set style_map = {
        'primary': 'info',
        'secondary': 'info',
        'info': 'info',
        'success': 'success',
        'warning': 'warning',
        'danger': 'error'
    } %}
    <div {{ ui.util.attrs(kwargs) }} class="alert {{ style_map.get(style, 'info') }}">
        {%- if title %}
            <h4>{{ title }}</h4>
        {%- endif %}
        <p>{{ content }}</p>
    </div>
{%- endmacro %}

{%- macro pagination_info(total, first, last, template) -%}
    {%- if not template and first is undefined or last is undefined -%}
        {% set template = ungettext("Found {total} result", "Found {total} results", total) %}
    {%- elif not template -%}
        {% set template = _("Results {first} - {last} out of {total}")  %}
    {%- endif -%}
    {{ template.format(first=first, last=last, total=total) }}
{%- endmacro %}
